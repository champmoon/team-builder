import{d as S,r as $,l as s,m as d,n as e,q as C,ag as m,f as t,ab as y,ac as V,F as w,v as B,aE as G,ae as Q,Q as D,a8 as L,x as b,y as n,a9 as R,_ as F,ad as E,P as H,ah as U,ai as J,o as X,E as Y,U as Z}from"./index-DzM_srFz.js";import{Q as z,a as g,b as k}from"./QItemLabel-BBVA7O39.js";import{Q as ee}from"./QExpansionItem-22ChQVvH.js";import{Q as A}from"./QList-Daj5B4BR.js";import{Q as te}from"./QPage-Ciq5b9Oz.js";import{I as oe}from"./InnerLoading-DS6JcJwB.js";import{Q as ae}from"./QForm-CtDzycCP.js";import{u as I,T as M}from"./useWorkoutStore-jgE2j8Ay.js";import{Q as le}from"./QSelect-5zrMXQeR.js";import{u as W,a as K,m as h}from"./use-quasar-OsAyRxUY.js";import"./TouchPan-Ct6QzyD3.js";import"./format-DPS1XQ7V.js";import"./date-B3h-bvU3.js";import"./QMenu-B6mTulVv.js";const se={class:"card-container card-container--sm bg-dark q-pa-md"},ne={class:"text-center q-mt-xs q-mb-lg"},re=S({__name:"WorkoutExerciseModal",props:{exercise:{}},emits:W.emits,setup(T){const p=T,r=I(),{dialogRef:v,onDialogOK:q}=W(),a=$({type:p.exercise?.type??1,reps:p.exercise?.reps??0,sets:p.exercise?.sets??0,rest:p.exercise?.rest??null,time:p.exercise?.time??0});function c(){const l={type:a.value.type};r.exercisesTypes[a.value.type].isBasic?(l.reps=a.value.reps,l.sets=a.value.sets,l.rest=a.value.rest):l.time=a.value.time,q(l)}return(l,o)=>(s(),d(R,{"no-backdrop-dismiss":!1,ref_key:"dialogRef",ref:v},{default:e(()=>[C("div",se,[C("h5",ne,m(l.exercise?"Редактирование упражнения":"Добавление упражнения"),1),t(le,{modelValue:a.value.type,"onUpdate:modelValue":o[0]||(o[0]=i=>a.value.type=i),options:Object.values(y(r).exercisesTypes),label:"Тип упражнения","option-label":"description","option-value":"type",class:"q-mb-md","map-options":"","emit-value":"",outlined:""},null,8,["modelValue","options"]),!y(r).exercisesTypes[a.value.type].isBasic&&typeof a.value.time=="number"?(s(),d(M,{key:0,modelValue:a.value.time,"onUpdate:modelValue":o[1]||(o[1]=i=>a.value.time=i),label:"Время выполнения",class:"q-mb-md"},null,8,["modelValue"])):(s(),V(w,{key:1},[t(B,{modelValue:a.value.reps,"onUpdate:modelValue":o[2]||(o[2]=i=>a.value.reps=i),modelModifiers:{number:!0},type:"number",label:"Количество повторений",class:"q-mb-md",outlined:""},null,8,["modelValue"]),t(B,{modelValue:a.value.sets,"onUpdate:modelValue":o[3]||(o[3]=i=>a.value.sets=i),modelModifiers:{number:!0},type:"number",label:"Количество подходов",class:"q-mb-md",outlined:""},null,8,["modelValue"]),t(G,{"model-value":a.value.rest!==null,"onUpdate:modelValue":o[4]||(o[4]=i=>a.value.rest=i?0:null),label:"Нужен перерыв между подходами",class:"q-mb-md"},null,8,["model-value"]),typeof a.value.rest=="number"?(s(),d(M,{key:0,modelValue:a.value.rest,"onUpdate:modelValue":o[5]||(o[5]=i=>a.value.rest=i),disable:a.value.rest===null,label:"Время перерыва между подходами",class:"q-mb-md"},null,8,["modelValue","disable"])):Q("",!0)],64)),t(D,{class:"bg-transparent",flat:""},{default:e(()=>[t(L,{class:"row q-pa-none"},{default:e(()=>[t(b,{onClick:c,"text-color":"positive",color:"secondary",class:"col border-radius-8",padding:"md lg",style:{"line-height":"21px"},"no-caps":""},{default:e(()=>[n(" Применить ")]),_:1})]),_:1})]),_:1})])]),_:1},512))}}),O=F(re,[["__file","WorkoutExerciseModal.vue"]]),ie={class:"card-container bg-dark q-pa-md"},ue={class:"text-center q-mt-xs q-mb-lg"},de=S({__name:"WorkoutModal",props:{workout:{},workoutIndex:{}},emits:W.emits,setup(T){const p=K(),r=T,v=I(),{dialogRef:q,onDialogOK:a}=W(),c=$(!1),l=$({name:r.workout?.name||"",estimatedTime:r.workout?.estimatedTime||0,exercises:r.workout?.exercises||[]});function o(_,x){p.dialog({component:O,componentProps:{exercise:_}}).onOk(u=>{l.value.exercises[x]=u})}function i(){p.dialog({component:O}).onOk(_=>{l.value.exercises.push(_)})}async function f(){c.value=!0;const _=r.workoutIndex?await v.updateWorkout(r.workoutIndex,l.value):await v.createWorkout(l.value);c.value=!1,_&&a()}return(_,x)=>(s(),d(R,{"no-backdrop-dismiss":!1,ref_key:"dialogRef",ref:q},{default:e(()=>[C("div",ie,[C("h5",ue,m(_.workout?"Редактирование тренировки":"Создание тренировки"),1),t(ae,{onSubmit:f},{default:e(()=>[t(B,{modelValue:l.value.name,"onUpdate:modelValue":x[0]||(x[0]=u=>l.value.name=u),label:"Название тренировки",class:"q-mb-md",autofocus:"",outlined:""},null,8,["modelValue"]),t(M,{modelValue:l.value.estimatedTime,"onUpdate:modelValue":x[1]||(x[1]=u=>l.value.estimatedTime=u),label:"Время выполнения тренировки"},null,8,["modelValue"]),t(A,{class:"q-my-md scroll",style:{"max-height":"calc(100vh - 24rem)"}},{default:e(()=>[(s(!0),V(w,null,E(l.value.exercises,(u,P)=>H((s(),d(z,{key:P,onClick:j=>o(u,P),clickable:""},{default:e(()=>[t(g,null,{default:e(()=>[t(k,null,{default:e(()=>[n(m(y(v).exercisesTypes[u.type].description),1)]),_:2},1024),u.time?(s(),d(k,{key:0,caption:""},{default:e(()=>[n(" Время выполнения - "+m(y(h)(u.time)),1)]),_:2},1024)):u.rest?(s(),d(k,{key:1,caption:""},{default:e(()=>[n(" Перерыв между подходами - "+m(y(h)(u.rest)),1)]),_:2},1024)):Q("",!0)]),_:2},1024),y(v).exercisesTypes[u.type].isBasic?(s(),d(g,{key:0,side:""},{default:e(()=>[t(k,{caption:""},{default:e(()=>[n(" Повторений: "+m(u.reps),1)]),_:2},1024),t(k,{caption:""},{default:e(()=>[n(" Подходов: "+m(u.sets),1)]),_:2},1024)]),_:2},1024)):Q("",!0),t(g,{side:""},{default:e(()=>[t(b,{onClick:U(j=>l.value.exercises.splice(P,1),["stop"]),"text-color":"negative",color:"secondary",size:"sm",icon:"close",round:"",flat:""},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["onClick"])),[[J]])),128))]),_:1}),t(D,{class:"bg-transparent",flat:""},{default:e(()=>[t(L,{class:"row q-pa-none"},{default:e(()=>[t(b,{onClick:i,"text-color":"info",color:"secondary",class:"col border-radius-8",padding:"md lg",style:{"line-height":"21px"},"no-caps":""},{default:e(()=>[n(" Добавить упражнение ")]),_:1}),t(b,{loading:c.value,type:"submit","text-color":"positive",color:"secondary",class:"col border-radius-8",padding:"md lg",style:{"line-height":"21px"},"no-caps":""},{default:e(()=>[n(" Применить ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})])]),_:1},512))}}),N=F(de,[["__file","WorkoutModal.vue"]]),me={key:0,class:"card-container column"},ce={class:"row"},pe=S({__name:"WorkoutPage",setup(T){const p=K(),r=I();function v(c){const l={name:c.name,estimatedTime:c.estimatedTime,exercises:[]};c.exercises.forEach(o=>{o.type.isBasic?l.exercises.push({type:o.type.type,reps:o.reps,sets:o.sets,rest:o.rest}):l.exercises.push({type:o.type.type,time:o.time})}),p.dialog({component:N,componentProps:{workout:l,workoutIndex:c.id}})}function q(){p.dialog({component:N})}function a(c){p.dialog({title:"Удаление тренировки",message:"Вы уверены, что хотите удалить тренировку?",persistent:!0,ok:{color:"negative",label:"Удалить"},cancel:{color:"secondary",label:"Отменить"}}).onOk(()=>{r.deleteWorkout(c)})}return X(r.loadPage),Y(()=>{r.isPageLoaded=!1}),(c,l)=>(s(),d(te,{class:"column items-center",padding:""},{default:e(()=>[y(r).isPageLoaded?(s(),V("div",me,[t(A,{class:"bg-secondary border-radius-8 overflow-hidden q-mb-lg"},{default:e(()=>[(s(!0),V(w,null,E(y(r).workoutsPool,(o,i)=>(s(),V(w,{key:o.id},[i?(s(),d(Z,{key:0})):Q("",!0),t(ee,{label:o.name,"content-inset-level":.3},{header:e(()=>[t(g,null,{default:e(()=>[t(k,null,{default:e(()=>[n(m(o.name),1)]),_:2},1024),t(k,{caption:""},{default:e(()=>[n(" Время проведения: "+m(y(h)(o.estimatedTime)),1)]),_:2},1024)]),_:2},1024),t(g,{side:""},{default:e(()=>[C("div",ce,[t(b,{onClick:U(f=>v(o),["stop"]),color:"positive",icon:"edit",size:"sm",flat:"",round:""},null,8,["onClick"]),t(b,{onClick:U(f=>a(o.id),["stop"]),color:"negative",icon:"close",size:"sm",round:"",flat:""},null,8,["onClick"])])]),_:2},1024)]),default:e(()=>[(s(!0),V(w,null,E(o.exercises,(f,_)=>(s(),d(z,{key:_},{default:e(()=>[t(g,null,{default:e(()=>[t(k,null,{default:e(()=>[n(m(f.type.description),1)]),_:2},1024),f.time?(s(),d(k,{key:0,caption:""},{default:e(()=>[n(" Время выполнения - "+m(y(h)(f.time)),1)]),_:2},1024)):f.rest?(s(),d(k,{key:1,caption:""},{default:e(()=>[n(" Перерыв между подходами - "+m(y(h)(f.rest)),1)]),_:2},1024)):Q("",!0)]),_:2},1024),f.type.isBasic?(s(),d(g,{key:0,side:""},{default:e(()=>[t(k,{caption:""},{default:e(()=>[n(" Повторений: "+m(f.reps),1)]),_:2},1024),t(k,{caption:""},{default:e(()=>[n(" Подходов: "+m(f.sets),1)]),_:2},1024)]),_:2},1024)):Q("",!0)]),_:2},1024))),128))]),_:2},1032,["label"])],64))),128))]),_:1}),t(D,{class:"bg-transparent",flat:""},{default:e(()=>[t(L,{class:"row q-pa-none"},{default:e(()=>[t(b,{onClick:q,color:"secondary","text-color":"info",class:"col border-radius-8",padding:"md lg",style:{"line-height":"21px"},"no-caps":""},{default:e(()=>[n(" Добавить тренировку ")]),_:1})]),_:1})]),_:1})])):(s(),d(oe,{key:1}))]),_:1}))}}),Te=F(pe,[["__file","WorkoutPage.vue"]]);export{Te as default};
