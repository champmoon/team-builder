import{_ as y}from"./index-Crs7OOR2.js";import{_ as N,a as P,b as V,c as k,d as v}from"./CardTitle.vue_vue_type_script_setup_true_lang-FzOuBrzU.js";import{u as R,t as g,F as i,_ as r,a as d,b as f,d as E,c as _}from"./Input.vue_vue_type_script_setup_true_lang-DD38yQ-O.js";import{d as F,$ as G,at as L,o as O,b as T,f as t,i as a,e as U,x as s,k as n,h as p,m as h,aE as A}from"./index-BPf4Rk1d.js";import{_ as B}from"./PasswordInput.vue_vue_type_script_setup_true_lang-C9BTRAaz.js";import"./useId-BWTRPJho.js";import"./useForwardPropsEmits-COt-lDJ5.js";const C={class:"relative"},j=F({__name:"ResetPassword",setup(I){const m=L(),{confirmPassword:c,changePassword:w}=G(),{handleSubmit:$,isSubmitting:b,setFieldValue:S}=R({validationSchema:g(A.REQUEST)}),u=$(async l=>{const e=await w(l);e&&m.push({name:"LOGIN",query:{email:e.email}})});return O(async()=>{const l=new URLSearchParams(window.location.search).get("confirm_token");if(!l){m.push({name:"LOGIN"});return}const e=await c({confirmToken:l});if(!e){m.push({name:"LOGIN"});return}S("email",e.email)}),(l,e)=>(U(),T(a(N),{class:"w-full max-w-md"},{default:t(()=>[s(a(k),null,{default:t(()=>[s(a(P),{class:"text-2xl"},{default:t(()=>e[1]||(e[1]=[n("Смена пароля")])),_:1}),s(a(V),null,{default:t(()=>e[2]||(e[2]=[n("Введите новый пароль.")])),_:1})]),_:1}),s(a(v),null,{default:t(()=>[p("form",{onSubmit:e[0]||(e[0]=(...o)=>a(u)&&a(u)(...o)),class:"space-y-2"},[s(a(i),{name:"email"},{default:t(({value:o,handleChange:x})=>[s(a(r),null,{default:t(()=>[s(a(d),null,{default:t(()=>e[3]||(e[3]=[n("Почта")])),_:1}),s(a(f),null,{default:t(()=>[s(a(E),{"model-value":o,"onUpdate:modelValue":x,type:"email",inputmode:"email",autocapitalize:"off",autocomplete:"email",placeholder:"example@example.com"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),s(a(_))]),_:2},1024)]),_:1}),s(a(i),{name:"password"},{default:t(({componentField:o})=>[s(a(r),null,{default:t(()=>[s(a(d),null,{default:t(()=>e[4]||(e[4]=[n(" Пароль ")])),_:1}),p("div",C,[s(a(f),null,{default:t(()=>[s(B,h(o,{autocomplete:"new-password"}),null,16)]),_:2},1024)]),s(a(_))]),_:2},1024)]),_:1}),s(a(y),{disabled:a(b),type:"submit",class:"w-full"},{default:t(()=>e[5]||(e[5]=[n(" Сменить пароль ")])),_:1},8,["disabled"])],32)]),_:1})]),_:1}))}});export{j as default};
