import{aP as Be,aQ as Ne,aR as Qe,aw as Ee,C as me,g as he,r as C,c as f,w as R,L as Le,h as c,an as Fe,a0 as $e,E as je,a1 as Ue,aL as Ye,aS as ze,ad as Xe,aN as Ge,aT as Je,a9 as Re,a6 as pe,v as ke,aC as Ze,d as et,aU as tt,aV as ut,l as nt,m as lt,n as X,f as G,p as at,R as ot,t as st,_ as it,aD as rt,A as W}from"./index-BFn0Cppg.js";import{T as ct}from"./TouchPan-Bhvho9XY.js";import{u as dt,a as vt,b as ft,_ as J,g as mt,f as ht}from"./date-DdmoPL0X.js";import{p as S}from"./format-Dumr6BwO.js";import{u as pt,a as kt,Q as gt}from"./QMenu-oS6U-ARc.js";import{m as _t,b as yt}from"./use-quasar-DjEifxil.js";function fe(t){if(t===!1)return 0;if(t===!0||t===void 0)return 1;const i=parseInt(t,10);return isNaN(i)?0:i}const wt=Be({name:"close-popup",beforeMount(t,{value:i}){const r={depth:fe(i),handler(m){r.depth!==0&&setTimeout(()=>{const h=Ne(t);h!==void 0&&Qe(h,m,r.depth)})},handlerKey(m){Ee(m,13)===!0&&r.handler(m)}};t.__qclosepopup=r,t.addEventListener("click",r.handler),t.addEventListener("keyup",r.handlerKey)},updated(t,{value:i,oldValue:r}){i!==r&&(t.__qclosepopup.depth=fe(i))},beforeUnmount(t){const i=t.__qclosepopup;t.removeEventListener("click",i.handler),t.removeEventListener("keyup",i.handlerKey),delete t.__qclosepopup}}),bt=me({name:"QPopupProxy",props:{...pt,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(t,{slots:i,emit:r,attrs:m}){const{proxy:h}=he(),{$q:b}=h,_=C(!1),x=C(null),K=f(()=>parseInt(t.breakpoint,10)),{canShow:B}=kt({showing:_});function T(){return b.screen.width<K.value||b.screen.height<K.value?"dialog":"menu"}const P=C(T()),D=f(()=>P.value==="menu"?{maxHeight:"99vh"}:{});R(()=>T(),v=>{_.value!==!0&&(P.value=v)});function V(v){_.value=!0,r("show",v)}function N(v){_.value=!1,P.value=T(),r("hide",v)}return Object.assign(h,{show(v){B(v)===!0&&x.value.show(v)},hide(v){x.value.hide(v)},toggle(v){x.value.toggle(v)}}),Le(h,"currentComponent",()=>({type:P.value,ref:x.value})),()=>{const v={ref:x,...D.value,...m,onShow:V,onHide:N};let q;return P.value==="dialog"?q=Fe:(q=gt,Object.assign(v,{target:t.target,contextMenu:t.contextMenu,noParentEvent:!0,separateClosePopup:!0})),c(q,v,i.default)}}});function xt(t,i){if(t.hour!==null){if(t.minute===null)return"minute";if(i===!0&&t.second===null)return"second"}return"hour"}function qt(){const t=new Date;return{hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),millisecond:t.getMilliseconds()}}const Ct=me({name:"QTime",props:{...$e,...je,...dt,mask:{default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:t=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(t)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:vt,setup(t,{slots:i,emit:r}){const m=he(),{$q:h}=m.proxy,b=Ue(t,h),{tabindex:_,headerClass:x,getLocale:K,getCurrentDate:B}=ft(t,h),T=Ye(t),P=Ge(T);let D,V;const N=C(null),v=f(()=>xe()),q=f(()=>K()),oe=f(()=>qe()),Q=J(t.modelValue,v.value,q.value,t.calendar,oe.value),s=C(xt(Q)),n=C(Q),p=C(Q.hour===null||Q.hour<12),ge=f(()=>`q-time q-time--${t.landscape===!0?"landscape":"portrait"}`+(b.value===!0?" q-time--dark q-dark":"")+(t.disable===!0?" disabled":t.readonly===!0?" q-time--readonly":"")+(t.bordered===!0?" q-time--bordered":"")+(t.square===!0?" q-time--square no-border-radius":"")+(t.flat===!0?" q-time--flat no-shadow":"")),Z=f(()=>{const e=n.value;return{hour:e.hour===null?"--":g.value===!0?S(e.hour):String(p.value===!0?e.hour===0?12:e.hour:e.hour>12?e.hour-12:e.hour),minute:e.minute===null?"--":S(e.minute),second:e.second===null?"--":S(e.second)}}),g=f(()=>t.format24h!==null?t.format24h:h.lang.date.format24h),_e=f(()=>{const e=s.value==="hour",u=e===!0?12:60,l=n.value[s.value];let d=`rotate(${Math.round(l*(360/u))-180}deg) translateX(-50%)`;return e===!0&&g.value===!0&&n.value.hour>=12&&(d+=" scale(.7)"),{transform:d}}),se=f(()=>n.value.hour!==null),ye=f(()=>se.value===!0&&n.value.minute!==null),I=f(()=>t.hourOptions!==void 0?e=>t.hourOptions.includes(e):t.options!==void 0?e=>t.options(e,null,null):null),E=f(()=>t.minuteOptions!==void 0?e=>t.minuteOptions.includes(e):t.options!==void 0?e=>t.options(n.value.hour,e,null):null),L=f(()=>t.secondOptions!==void 0?e=>t.secondOptions.includes(e):t.options!==void 0?e=>t.options(n.value.hour,n.value.minute,e):null),w=f(()=>{if(I.value===null)return null;const e=$(0,11,I.value),u=$(12,11,I.value);return{am:e,pm:u,values:e.values.concat(u.values)}}),O=f(()=>E.value!==null?$(0,59,E.value):null),H=f(()=>L.value!==null?$(0,59,L.value):null),F=f(()=>{switch(s.value){case"hour":return w.value;case"minute":return O.value;case"second":return H.value}}),we=f(()=>{let e,u,l=0,o=1;const d=F.value!==null?F.value.values:void 0;s.value==="hour"?g.value===!0?(e=0,u=23):(e=0,u=11,p.value===!1&&(l=12)):(e=0,u=55,o=5);const y=[];for(let a=e,k=e;a<=u;a+=o,k++){const M=a+l,We=d!==void 0&&d.includes(M)===!1,Ke=s.value==="hour"&&a===0?g.value===!0?"00":"12":a;y.push({val:M,index:k,disable:We,label:Ke})}return y}),be=f(()=>[[ct,Ce,void 0,{stop:!0,prevent:!0,mouse:!0}]]);R(()=>t.modelValue,e=>{const u=J(e,v.value,q.value,t.calendar,oe.value);(u.dateHash!==n.value.dateHash||u.timeHash!==n.value.timeHash)&&(n.value=u,u.hour===null?s.value="hour":p.value=u.hour<12)}),R([v,q],()=>{Ze(()=>{ae()})});function ie(){const e={...B(),...qt()};ae(e),Object.assign(n.value,e),s.value="hour"}function $(e,u,l){const o=Array.apply(null,{length:u+1}).map((d,y)=>{const a=y+e;return{index:a,val:l(a)===!0}}).filter(d=>d.val===!0).map(d=>d.index);return{min:o[0],max:o[o.length-1],values:o,threshold:u+1}}function re(e,u,l){const o=Math.abs(e-u);return Math.min(o,l-o)}function ee(e,{min:u,max:l,values:o,threshold:d}){if(e===u)return u;if(e<u||e>l)return re(e,u,d)<=re(e,l,d)?u:l;const y=o.findIndex(M=>e<=M),a=o[y-1],k=o[y];return e-a<=k-e?a:k}function xe(){return t.calendar!=="persian"&&t.mask!==null?t.mask:`HH:mm${t.withSeconds===!0?":ss":""}`}function qe(){if(typeof t.defaultDate!="string"){const e=B(!0);return e.dateHash=mt(e),e}return J(t.defaultDate,"YYYY/MM/DD",void 0,t.calendar)}function te(){return Je(m)===!0||F.value!==null&&(F.value.values.length===0||s.value==="hour"&&g.value!==!0&&w.value[p.value===!0?"am":"pm"].values.length===0)}function ue(){const e=N.value,{top:u,left:l,width:o}=e.getBoundingClientRect(),d=o/2;return{top:u+d,left:l+d,dist:d*.7}}function Ce(e){if(te()!==!0){if(e.isFirst===!0){D=ue(),V=j(e.evt,D);return}V=j(e.evt,D,V),e.isFinal===!0&&(D=!1,V=null,ce())}}function ce(){s.value==="hour"?s.value="minute":t.withSeconds&&s.value==="minute"&&(s.value="second")}function j(e,u,l){const o=ze(e),d=Math.abs(o.top-u.top),y=Math.sqrt(Math.pow(Math.abs(o.top-u.top),2)+Math.pow(Math.abs(o.left-u.left),2));let a,k=Math.asin(d/y)*(180/Math.PI);if(o.top<u.top?k=u.left<o.left?90-k:270+k:k=u.left<o.left?k+90:270-k,s.value==="hour"){if(a=k/30,w.value!==null){const M=g.value!==!0?p.value===!0:w.value.am.values.length!==0&&w.value.pm.values.length!==0?y>=u.dist:w.value.am.values.length!==0;a=ee(a+(M===!0?0:12),w.value[M===!0?"am":"pm"])}else a=Math.round(a),g.value===!0?y<u.dist?a<12&&(a+=12):a===12&&(a=0):p.value===!0&&a===12?a=0:p.value===!1&&a!==12&&(a+=12);g.value===!0&&(p.value=a<12)}else a=Math.round(k/6)%60,s.value==="minute"&&O.value!==null?a=ee(a,O.value):s.value==="second"&&H.value!==null&&(a=ee(a,H.value));return l!==a&&Oe[s.value](a),a}const ne={hour(){s.value="hour"},minute(){s.value="minute"},second(){s.value="second"}};function Pe(e){e.keyCode===13&&de()}function Me(e){e.keyCode===13&&ve()}function De(e){te()!==!0&&(h.platform.is.desktop!==!0&&j(e,ue()),ce())}function Ve(e){te()!==!0&&j(e,ue())}function Se(e){if(e.keyCode===13)s.value="hour";else if([37,39].includes(e.keyCode)){const u=e.keyCode===37?-1:1;if(w.value!==null){const l=g.value===!0?w.value.values:w.value[p.value===!0?"am":"pm"].values;if(l.length===0)return;if(n.value.hour===null)U(l[0]);else{const o=(l.length+l.indexOf(n.value.hour)+u)%l.length;U(l[o])}}else{const l=g.value===!0?24:12,o=g.value!==!0&&p.value===!1?12:0,d=n.value.hour===null?-u:n.value.hour;U(o+(24+d+u)%l)}}}function Te(e){if(e.keyCode===13)s.value="minute";else if([37,39].includes(e.keyCode)){const u=e.keyCode===37?-1:1;if(O.value!==null){const l=O.value.values;if(l.length===0)return;if(n.value.minute===null)Y(l[0]);else{const o=(l.length+l.indexOf(n.value.minute)+u)%l.length;Y(l[o])}}else{const l=n.value.minute===null?-u:n.value.minute;Y((60+l+u)%60)}}}function Ie(e){if(e.keyCode===13)s.value="second";else if([37,39].includes(e.keyCode)){const u=e.keyCode===37?-1:1;if(H.value!==null){const l=H.value.values;if(l.length===0)return;if(n.value.seconds===null)z(l[0]);else{const o=(l.length+l.indexOf(n.value.second)+u)%l.length;z(l[o])}}else{const l=n.value.second===null?-u:n.value.second;z((60+l+u)%60)}}}function U(e){n.value.hour!==e&&(n.value.hour=e,A())}function Y(e){n.value.minute!==e&&(n.value.minute=e,A())}function z(e){n.value.second!==e&&(n.value.second=e,A())}const Oe={hour:U,minute:Y,second:z};function de(){p.value===!1&&(p.value=!0,n.value.hour!==null&&(n.value.hour-=12,A()))}function ve(){p.value===!0&&(p.value=!1,n.value.hour!==null&&(n.value.hour+=12,A()))}function le(e){const u=t.modelValue;s.value!==e&&u!==void 0&&u!==null&&u!==""&&typeof u!="string"&&(s.value=e)}function A(){if(I.value!==null&&I.value(n.value.hour)!==!0){n.value=J(),le("hour");return}if(E.value!==null&&E.value(n.value.minute)!==!0){n.value.minute=null,n.value.second=null,le("minute");return}if(t.withSeconds===!0&&L.value!==null&&L.value(n.value.second)!==!0){n.value.second=null,le("second");return}n.value.hour===null||n.value.minute===null||t.withSeconds===!0&&n.value.second===null||ae()}function ae(e){const u=Object.assign({...n.value},e),l=t.calendar==="persian"?S(u.hour)+":"+S(u.minute)+(t.withSeconds===!0?":"+S(u.second):""):ht(new Date(u.year,u.month===null?null:u.month-1,u.day,u.hour,u.minute,u.second,u.millisecond),v.value,q.value,u.year,u.timezoneOffset);u.changed=l!==t.modelValue,r("update:modelValue",l,u)}function He(){const e=[c("div",{class:"q-time__link "+(s.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:_.value,onClick:ne.hour,onKeyup:Se},Z.value.hour),c("div",":"),c("div",se.value===!0?{class:"q-time__link "+(s.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:_.value,onKeyup:Te,onClick:ne.minute}:{class:"q-time__link"},Z.value.minute)];t.withSeconds===!0&&e.push(c("div",":"),c("div",ye.value===!0?{class:"q-time__link "+(s.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:_.value,onKeyup:Ie,onClick:ne.second}:{class:"q-time__link"},Z.value.second));const u=[c("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},e)];return g.value===!1&&u.push(c("div",{class:"q-time__header-ampm column items-between no-wrap"},[c("div",{class:"q-time__link "+(p.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:_.value,onClick:de,onKeyup:Pe},"AM"),c("div",{class:"q-time__link "+(p.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:_.value,onClick:ve,onKeyup:Me},"PM")])),c("div",{class:"q-time__header flex flex-center no-wrap "+x.value},u)}function Ae(){const e=n.value[s.value];return c("div",{class:"q-time__content col relative-position"},[c(Re,{name:"q-transition--scale"},()=>c("div",{key:"clock"+s.value,class:"q-time__container-parent absolute-full"},[c("div",{ref:N,class:"q-time__container-child fit overflow-hidden"},[pe(c("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:De,onMousedown:Ve},[c("div",{class:"q-time__clock-circle fit"},[c("div",{class:"q-time__clock-pointer"+(n.value[s.value]===null?" hidden":t.color!==void 0?` text-${t.color}`:""),style:_e.value}),we.value.map(u=>c("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${u.index}`+(u.val===e?" q-time__clock-position--active "+x.value:u.disable===!0?" q-time__clock-position--disable":"")},[c("span",u.label)]))])]),be.value)])])),t.nowBtn===!0?c(ke,{class:"q-time__now-button absolute",icon:h.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:t.color,textColor:t.textColor,tabindex:_.value,onClick:ie}):null])}return m.proxy.setNow=ie,()=>{const e=[Ae()],u=Xe(i.default);return u!==void 0&&e.push(c("div",{class:"q-time__actions"},u)),t.name!==void 0&&t.disable!==!0&&P(e,"push"),c("div",{class:ge.value,tabindex:-1},[He(),c("div",{class:"q-time__main col overflow-auto"},e)])}}}),Pt={class:"row items-center justify-end"},Mt=et({__name:"TimeInput",props:tt({label:{},disable:{type:Boolean,default:!1}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const i=ut(t,"modelValue"),r=C(_t(i.value));return R(r,m=>{i.value=yt(m)}),(m,h)=>(nt(),lt(st,{modelValue:r.value,"onUpdate:modelValue":h[1]||(h[1]=b=>r.value=b),label:m.label,rules:["fulltime"],disable:m.disable,mask:"fulltime","hide-bottom-space":"",outlined:""},{append:X(()=>[G(ot,{name:"access_time",class:"cursor-pointer"},{default:X(()=>[G(bt,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:X(()=>[G(Ct,{modelValue:r.value,"onUpdate:modelValue":h[0]||(h[0]=b=>r.value=b),"with-seconds":"",format24h:""},{default:X(()=>[at("div",Pt,[pe(G(ke,{label:"Close",color:"primary",flat:""},null,512),[[wt]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","label","disable"]))}}),At=it(Mt,[["__file","TimeInput.vue"]]),Dt=rt("workout",{state:()=>({exercisesTypes:{},workoutsPool:[],isPageLoaded:!1}),actions:{async loadPage(){this.loadWorkoutData(),this.isPageLoaded=!0},async loadWorkoutData(){await this.getExercisesTypes(),await this.getWorkoutsPool()},async getExercisesTypes(){const t=await W.getExercisesTypes();t&&t.forEach(i=>{this.exercisesTypes[i.type]=i})},async getWorkoutsPool(){const t=await W.getWorkoutsPool();t&&(this.workoutsPool=t)},async updateWorkout(t,i){const r=await W.updateWorkoutsPool(t,i);if(!r)return!1;const m=this.workoutsPool.findIndex(h=>h.id===t);return this.workoutsPool.splice(m,1),this.workoutsPool.push(r),!0},async createWorkout(t){const i=await W.createWorkoutsPool(t);return i?(this.workoutsPool.push(i),!0):!1},async deleteWorkout(t){if(!await W.deleteWorkoutsPool(t))return;const r=this.workoutsPool.findIndex(m=>m.id===t);this.workoutsPool.splice(r,1)}}}),Wt=Dt;export{wt as C,bt as Q,At as T,Ct as a,Wt as u};
