import{B as ae,c as u,h as S,z as te,aL as Te,G as qe,aM as Be,g as xe,I as Ce,aH as Se,i as Me,aa as V,r as k,aN as Oe,aO as $e,w as n,o as De,A as Z,E as Le,ag as We,J as p,ac as Ae,aP as Pe}from"./index-CeEpBFAd.js";import{T as N,b as D}from"./format-CCNjqaqs.js";const Qe=ae({name:"QToolbarTitle",props:{shrink:Boolean},setup(a,{slots:T}){const v=u(()=>"q-toolbar__title ellipsis"+(a.shrink===!0?" col-shrink":""));return()=>S("div",{class:v.value},te(T.default))}}),ee=150,Fe=ae({name:"QDrawer",inheritAttrs:!1,props:{...Te,...qe,side:{type:String,default:"left",validator:a=>["left","right"].includes(a)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:a=>["default","desktop","mobile"].includes(a),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...Be,"onLayout","miniState"],setup(a,{slots:T,emit:v,attrs:R}){const m=xe(),{proxy:{$q:c}}=m,le=Ce(a,c),{preventBodyScroll:L}=Pe(),{registerTimeout:j,removeTimeout:ue}=Se(),t=Me(Ae,V);if(t===V)return console.error("QDrawer needs to be child of QLayout"),V;let W,y=null,q;const i=k(a.behavior==="mobile"||a.behavior!=="desktop"&&t.totalWidth.value<=a.breakpoint),B=u(()=>a.mini===!0&&i.value!==!0),s=u(()=>B.value===!0?a.miniWidth:a.width),o=k(a.showIfAbove===!0&&i.value===!1?!0:a.modelValue===!0),E=u(()=>a.persistent!==!0&&(i.value===!0||ne.value===!0));function U(e,l){if(oe(),e!==!1&&t.animate(),d(0),i.value===!0){const r=t.instances[O.value];r!==void 0&&r.belowBreakpoint===!0&&r.hide(!1),h(1),t.isContainer.value!==!0&&L(!0)}else h(0),e!==!1&&Q(!1);j(()=>{e!==!1&&Q(!0),l!==!0&&v("show",e)},ee)}function G(e,l){ie(),e!==!1&&t.animate(),h(0),d(w.value*s.value),F(),l!==!0?j(()=>{v("hide",e)},ee):ue()}const{show:A,hide:x}=Oe({showing:o,hideOnRouteChange:E,handleShow:U,handleHide:G}),{addToHistory:oe,removeFromHistory:ie}=$e(o,x,E),M={belowBreakpoint:i,hide:x},f=u(()=>a.side==="right"),w=u(()=>(c.lang.rtl===!0?-1:1)*(f.value===!0?1:-1)),J=k(0),g=k(!1),P=k(!1),K=k(s.value*w.value),O=u(()=>f.value===!0?"left":"right"),_=u(()=>o.value===!0&&i.value===!1&&a.overlay===!1?a.miniToOverlay===!0?a.miniWidth:s.value:0),z=u(()=>a.overlay===!0||a.miniToOverlay===!0||t.view.value.indexOf(f.value?"R":"L")!==-1||c.platform.is.ios===!0&&t.isContainer.value===!0),C=u(()=>a.overlay===!1&&o.value===!0&&i.value===!1),ne=u(()=>a.overlay===!0&&o.value===!0&&i.value===!1),re=u(()=>"fullscreen q-drawer__backdrop"+(o.value===!1&&g.value===!1?" hidden":"")),se=u(()=>({backgroundColor:`rgba(0,0,0,${J.value*.4})`})),X=u(()=>f.value===!0?t.rows.value.top[2]==="r":t.rows.value.top[0]==="l"),de=u(()=>f.value===!0?t.rows.value.bottom[2]==="r":t.rows.value.bottom[0]==="l"),ve=u(()=>{const e={};return t.header.space===!0&&X.value===!1&&(z.value===!0?e.top=`${t.header.offset}px`:t.header.space===!0&&(e.top=`${t.header.size}px`)),t.footer.space===!0&&de.value===!1&&(z.value===!0?e.bottom=`${t.footer.offset}px`:t.footer.space===!0&&(e.bottom=`${t.footer.size}px`)),e}),ce=u(()=>{const e={width:`${s.value}px`,transform:`translateX(${K.value}px)`};return i.value===!0?e:Object.assign(e,ve.value)}),fe=u(()=>"q-drawer__content fit "+(t.isContainer.value!==!0?"scroll":"overflow-auto")),me=u(()=>`q-drawer q-drawer--${a.side}`+(P.value===!0?" q-drawer--mini-animate":"")+(a.bordered===!0?" q-drawer--bordered":"")+(le.value===!0?" q-drawer--dark q-dark":"")+(g.value===!0?" no-transition":o.value===!0?"":" q-layout--prevent-focus")+(i.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${B.value===!0?"mini":"standard"}`+(z.value===!0||C.value!==!0?" fixed":"")+(a.overlay===!0||a.miniToOverlay===!0?" q-drawer--on-top":"")+(X.value===!0?" q-drawer--top-padding":""))),he=u(()=>{const e=c.lang.rtl===!0?a.side:O.value;return[[N,ge,void 0,{[e]:!0,mouse:!0}]]}),be=u(()=>{const e=c.lang.rtl===!0?O.value:a.side;return[[N,Y,void 0,{[e]:!0,mouse:!0}]]}),ye=u(()=>{const e=c.lang.rtl===!0?O.value:a.side;return[[N,Y,void 0,{[e]:!0,mouse:!0,mouseAllDir:!0}]]});function I(){ke(i,a.behavior==="mobile"||a.behavior!=="desktop"&&t.totalWidth.value<=a.breakpoint)}n(i,e=>{e===!0?(W=o.value,o.value===!0&&x(!1)):a.overlay===!1&&a.behavior!=="mobile"&&W!==!1&&(o.value===!0?(d(0),h(0),F()):A(!1))}),n(()=>a.side,(e,l)=>{t.instances[l]===M&&(t.instances[l]=void 0,t[l].space=!1,t[l].offset=0),t.instances[e]=M,t[e].size=s.value,t[e].space=C.value,t[e].offset=_.value}),n(t.totalWidth,()=>{(t.isContainer.value===!0||document.qScrollPrevented!==!0)&&I()}),n(()=>a.behavior+a.breakpoint,I),n(t.isContainer,e=>{o.value===!0&&L(e!==!0),e===!0&&I()}),n(t.scrollbarWidth,()=>{d(o.value===!0?0:void 0)}),n(_,e=>{b("offset",e)}),n(C,e=>{v("onLayout",e),b("space",e)}),n(f,()=>{d()}),n(s,e=>{d(),H(a.miniToOverlay,e)}),n(()=>a.miniToOverlay,e=>{H(e,s.value)}),n(()=>c.lang.rtl,()=>{d()}),n(()=>a.mini,()=>{a.noMiniAnimation||a.modelValue===!0&&(we(),t.animate())}),n(B,e=>{v("miniState",e)});function d(e){e===void 0?Z(()=>{e=o.value===!0?0:s.value,d(w.value*e)}):(t.isContainer.value===!0&&f.value===!0&&(i.value===!0||Math.abs(e)===s.value)&&(e+=w.value*t.scrollbarWidth.value),K.value=e)}function h(e){J.value=e}function Q(e){const l=e===!0?"remove":t.isContainer.value!==!0?"add":"";l!==""&&document.body.classList[l]("q-body--drawer-toggle")}function we(){y!==null&&clearTimeout(y),m.proxy&&m.proxy.$el&&m.proxy.$el.classList.add("q-drawer--mini-animate"),P.value=!0,y=setTimeout(()=>{y=null,P.value=!1,m&&m.proxy&&m.proxy.$el&&m.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function ge(e){if(o.value!==!1)return;const l=s.value,r=D(e.distance.x,0,l);if(e.isFinal===!0){r>=Math.min(75,l)===!0?A():(t.animate(),h(0),d(w.value*l)),g.value=!1;return}d((c.lang.rtl===!0?f.value!==!0:f.value)?Math.max(l-r,0):Math.min(0,r-l)),h(D(r/l,0,1)),e.isFirst===!0&&(g.value=!0)}function Y(e){if(o.value!==!0)return;const l=s.value,r=e.direction===a.side,$=(c.lang.rtl===!0?r!==!0:r)?D(e.distance.x,0,l):0;if(e.isFinal===!0){Math.abs($)<Math.min(75,l)===!0?(t.animate(),h(1),d(0)):x(),g.value=!1;return}d(w.value*$),h(D(1-$/l,0,1)),e.isFirst===!0&&(g.value=!0)}function F(){L(!1),Q(!0)}function b(e,l){t.update(a.side,e,l)}function ke(e,l){e.value!==l&&(e.value=l)}function H(e,l){b("size",e===!0?a.miniWidth:l)}return t.instances[a.side]=M,H(a.miniToOverlay,s.value),b("space",C.value),b("offset",_.value),a.showIfAbove===!0&&a.modelValue!==!0&&o.value===!0&&a["onUpdate:modelValue"]!==void 0&&v("update:modelValue",!0),De(()=>{v("onLayout",C.value),v("miniState",B.value),W=a.showIfAbove===!0;const e=()=>{(o.value===!0?U:G)(!1,!0)};if(t.totalWidth.value!==0){Z(e);return}q=n(t.totalWidth,()=>{q(),q=void 0,o.value===!1&&a.showIfAbove===!0&&i.value===!1?A(!1):e()})}),Le(()=>{q!==void 0&&q(),y!==null&&(clearTimeout(y),y=null),o.value===!0&&F(),t.instances[a.side]===M&&(t.instances[a.side]=void 0,b("size",0),b("offset",0),b("space",!1))}),()=>{const e=[];i.value===!0&&(a.noSwipeOpen===!1&&e.push(We(S("div",{key:"open",class:`q-drawer__opener fixed-${a.side}`,"aria-hidden":"true"}),he.value)),e.push(p("div",{ref:"backdrop",class:re.value,style:se.value,"aria-hidden":"true",onClick:x},void 0,"backdrop",a.noSwipeBackdrop!==!0&&o.value===!0,()=>ye.value)));const l=B.value===!0&&T.mini!==void 0,r=[S("div",{...R,key:""+l,class:[fe.value,R.class]},l===!0?T.mini():te(T.default))];return a.elevated===!0&&o.value===!0&&r.push(S("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),e.push(p("aside",{ref:"content",class:me.value,style:ce.value},r,"contentclose",a.noSwipeClose!==!0&&i.value===!0,()=>be.value)),S("div",{class:"q-drawer-container"},e)}}});export{Qe as Q,Fe as a};
