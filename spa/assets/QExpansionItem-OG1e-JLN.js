import{z as ne,g as fe,r as A,c as d,w as Y,aS as Fe,h as i,aa as Ye,I as we,aB as ze,J as qe,aC as Ue,aV as Ge,Z as Se,aE as Re,aI as We,V as Ie,P as Ce,x as Xe,ar as Je,E as Te,aW as Ze,B as Me,av as et,aw as tt,aX as nt,ax as lt,ao as at,U as _e,aY as ut,ab as ye,ak as ot}from"./index-CigzdHN_.js";import{u as it,a as st,Q as rt,p as F}from"./format-NPAdbmeA.js";import{T as ct}from"./TouchPan-Cw4Uz1Aa.js";import{b as dt,c as vt,d as ft,_ as te,g as mt,f as ht}from"./use-quasar-DqX5Bo9Z.js";import{a as gt,c as ke,b as ve}from"./QItemLabel-DhRnJ0An.js";const Ct=ne({name:"QPopupProxy",props:{...it,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:O,emit:D,attrs:y}){const{proxy:_}=fe(),{$q:m}=_,v=A(!1),g=A(null),w=d(()=>parseInt(e.breakpoint,10)),{canShow:H}=st({showing:v});function S(){return m.screen.width<w.value||m.screen.height<w.value?"dialog":"menu"}const b=A(S()),k=d(()=>b.value==="menu"?{maxHeight:"99vh"}:{});Y(()=>S(),l=>{v.value!==!0&&(b.value=l)});function P(l){v.value=!0,D("show",l)}function B(l){v.value=!1,b.value=S(),D("hide",l)}return Object.assign(_,{show(l){H(l)===!0&&g.value.show(l)},hide(l){g.value.hide(l)},toggle(l){g.value.toggle(l)}}),Fe(_,"currentComponent",()=>({type:b.value,ref:g.value})),()=>{const l={ref:g,...k.value,...y,onShow:P,onHide:B};let h;return b.value==="dialog"?h=Ye:(h=rt,Object.assign(l,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),i(h,l,O.default)}}});function bt(e,O){if(e.hour!==null){if(e.minute===null)return"minute";if(O===!0&&e.second===null)return"second"}return"hour"}function xt(){const e=new Date;return{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}}const Tt=ne({name:"QTime",props:{...we,...ze,...dt,mask:{default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:vt,setup(e,{slots:O,emit:D}){const y=fe(),{$q:_}=y.proxy,m=qe(e,_),{tabindex:v,headerClass:g,getLocale:w,getCurrentDate:H}=ft(e,_),S=Ue(e),b=Re(S);let k,P;const B=A(null),l=d(()=>pe()),h=d(()=>w()),M=d(()=>Oe()),I=te(e.modelValue,l.value,h.value,e.calendar,M.value),r=A(bt(I)),a=A(I),x=A(I.hour===null||I.hour<12),le=d(()=>`q-time q-time--${e.landscape===!0?"landscape":"portrait"}`+(m.value===!0?" q-time--dark q-dark":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-time--readonly":"")+(e.bordered===!0?" q-time--bordered":"")+(e.square===!0?" q-time--square no-border-radius":"")+(e.flat===!0?" q-time--flat no-shadow":"")),z=d(()=>{const t=a.value;return{hour:t.hour===null?"--":q.value===!0?F(t.hour):String(x.value===!0?t.hour===0?12:t.hour:t.hour>12?t.hour-12:t.hour),minute:t.minute===null?"--":F(t.minute),second:t.second===null?"--":F(t.second)}}),q=d(()=>e.format24h!==null?e.format24h:_.lang.date.format24h),ae=d(()=>{const t=r.value==="hour",n=t===!0?12:60,u=a.value[r.value];let f=`rotate(${Math.round(u*(360/n))-180}deg) translateX(-50%)`;return t===!0&&q.value===!0&&a.value.hour>=12&&(f+=" scale(.7)"),{transform:f}}),G=d(()=>a.value.hour!==null),R=d(()=>G.value===!0&&a.value.minute!==null),Q=d(()=>e.hourOptions!==void 0?t=>e.hourOptions.includes(t):e.options!==void 0?t=>e.options(t,null,null):null),$=d(()=>e.minuteOptions!==void 0?t=>e.minuteOptions.includes(t):e.options!==void 0?t=>e.options(a.value.hour,t,null):null),K=d(()=>e.secondOptions!==void 0?t=>e.secondOptions.includes(t):e.options!==void 0?t=>e.options(a.value.hour,a.value.minute,t):null),p=d(()=>{if(Q.value===null)return null;const t=W(0,11,Q.value),n=W(12,11,Q.value);return{am:t,pm:n,values:t.values.concat(n.values)}}),V=d(()=>$.value!==null?W(0,59,$.value):null),o=d(()=>K.value!==null?W(0,59,K.value):null),C=d(()=>{switch(r.value){case"hour":return p.value;case"minute":return V.value;case"second":return o.value}}),N=d(()=>{let t,n,u=0,c=1;const f=C.value!==null?C.value.values:void 0;r.value==="hour"?q.value===!0?(t=0,n=23):(t=0,n=11,x.value===!1&&(u=12)):(t=0,n=55,c=5);const L=[];for(let s=t,T=t;s<=n;s+=c,T++){const j=s+u,Ke=f!==void 0&&f.includes(j)===!1,Ne=r.value==="hour"&&s===0?q.value===!0?"00":"12":s;L.push({val:j,index:T,disable:Ke,label:Ne})}return L}),ue=d(()=>[[ct,He,void 0,{stop:!0,prevent:!0,mouse:!0}]]);Y(()=>e.modelValue,t=>{const n=te(t,l.value,h.value,e.calendar,M.value);(n.dateHash!==a.value.dateHash||n.timeHash!==a.value.timeHash)&&(a.value=n,n.hour===null?r.value="hour":x.value=n.hour<12)}),Y([l,h],()=>{Je(()=>{de()})});function me(){const t={...H(),...xt()};de(t),Object.assign(a.value,t),r.value="hour"}function W(t,n,u){const c=Array.apply(null,{length:n+1}).map((f,L)=>{const s=L+t;return{index:s,val:u(s)===!0}}).filter(f=>f.val===!0).map(f=>f.index);return{min:c[0],max:c[c.length-1],values:c,threshold:n+1}}function he(t,n,u){const c=Math.abs(t-n);return Math.min(c,u-c)}function oe(t,{min:n,max:u,values:c,threshold:f}){if(t===n)return n;if(t<n||t>u)return he(t,n,f)<=he(t,u,f)?n:u;const L=c.findIndex(j=>t<=j),s=c[L-1],T=c[L];return t-s<=T-t?s:T}function pe(){return e.calendar!=="persian"&&e.mask!==null?e.mask:`HH:mm${e.withSeconds===!0?":ss":""}`}function Oe(){if(typeof e.defaultDate!="string"){const t=H(!0);return t.dateHash=mt(t),t}return te(e.defaultDate,"YYYY/MM/DD",void 0,e.calendar)}function ie(){return We(y)===!0||C.value!==null&&(C.value.values.length===0||r.value==="hour"&&q.value!==!0&&p.value[x.value===!0?"am":"pm"].values.length===0)}function se(){const t=B.value,{top:n,left:u,width:c}=t.getBoundingClientRect(),f=c/2;return{top:n+f,left:u+f,dist:f*.7}}function He(t){if(ie()!==!0){if(t.isFirst===!0){k=se(),P=X(t.evt,k);return}P=X(t.evt,k,P),t.isFinal===!0&&(k=!1,P=null,ge())}}function ge(){r.value==="hour"?r.value="minute":e.withSeconds&&r.value==="minute"&&(r.value="second")}function X(t,n,u){const c=Ge(t),f=Math.abs(c.top-n.top),L=Math.sqrt(Math.pow(Math.abs(c.top-n.top),2)+Math.pow(Math.abs(c.left-n.left),2));let s,T=Math.asin(f/L)*(180/Math.PI);if(c.top<n.top?T=n.left<c.left?90-T:270+T:T=n.left<c.left?T+90:270-T,r.value==="hour"){if(s=T/30,p.value!==null){const j=q.value!==!0?x.value===!0:p.value.am.values.length!==0&&p.value.pm.values.length!==0?L>=n.dist:p.value.am.values.length!==0;s=oe(s+(j===!0?0:12),p.value[j===!0?"am":"pm"])}else s=Math.round(s),q.value===!0?L<n.dist?s<12&&(s+=12):s===12&&(s=0):x.value===!0&&s===12?s=0:x.value===!1&&s!==12&&(s+=12);q.value===!0&&(x.value=s<12)}else s=Math.round(T/6)%60,r.value==="minute"&&V.value!==null?s=oe(s,V.value):r.value==="second"&&o.value!==null&&(s=oe(s,o.value));return u!==s&&je[r.value](s),s}const re={hour(){r.value="hour"},minute(){r.value="minute"},second(){r.value="second"}};function Le(t){t.keyCode===13&&be()}function De(t){t.keyCode===13&&xe()}function Pe(t){ie()!==!0&&(_.platform.is.desktop!==!0&&X(t,se()),ge())}function Ae(t){ie()!==!0&&X(t,se())}function Be(t){if(t.keyCode===13)r.value="hour";else if([37,39].includes(t.keyCode)){const n=t.keyCode===37?-1:1;if(p.value!==null){const u=q.value===!0?p.value.values:p.value[x.value===!0?"am":"pm"].values;if(u.length===0)return;if(a.value.hour===null)J(u[0]);else{const c=(u.length+u.indexOf(a.value.hour)+n)%u.length;J(u[c])}}else{const u=q.value===!0?24:12,c=q.value!==!0&&x.value===!1?12:0,f=a.value.hour===null?-n:a.value.hour;J(c+(24+f+n)%u)}}}function Qe(t){if(t.keyCode===13)r.value="minute";else if([37,39].includes(t.keyCode)){const n=t.keyCode===37?-1:1;if(V.value!==null){const u=V.value.values;if(u.length===0)return;if(a.value.minute===null)Z(u[0]);else{const c=(u.length+u.indexOf(a.value.minute)+n)%u.length;Z(u[c])}}else{const u=a.value.minute===null?-n:a.value.minute;Z((60+u+n)%60)}}}function Ve(t){if(t.keyCode===13)r.value="second";else if([37,39].includes(t.keyCode)){const n=t.keyCode===37?-1:1;if(o.value!==null){const u=o.value.values;if(u.length===0)return;if(a.value.seconds===null)ee(u[0]);else{const c=(u.length+u.indexOf(a.value.second)+n)%u.length;ee(u[c])}}else{const u=a.value.second===null?-n:a.value.second;ee((60+u+n)%60)}}}function J(t){a.value.hour!==t&&(a.value.hour=t,U())}function Z(t){a.value.minute!==t&&(a.value.minute=t,U())}function ee(t){a.value.second!==t&&(a.value.second=t,U())}const je={hour:J,minute:Z,second:ee};function be(){x.value===!1&&(x.value=!0,a.value.hour!==null&&(a.value.hour-=12,U()))}function xe(){x.value===!0&&(x.value=!1,a.value.hour!==null&&(a.value.hour+=12,U()))}function ce(t){const n=e.modelValue;r.value!==t&&n!==void 0&&n!==null&&n!==""&&typeof n!="string"&&(r.value=t)}function U(){if(Q.value!==null&&Q.value(a.value.hour)!==!0){a.value=te(),ce("hour");return}if($.value!==null&&$.value(a.value.minute)!==!0){a.value.minute=null,a.value.second=null,ce("minute");return}if(e.withSeconds===!0&&K.value!==null&&K.value(a.value.second)!==!0){a.value.second=null,ce("second");return}a.value.hour===null||a.value.minute===null||e.withSeconds===!0&&a.value.second===null||de()}function de(t){const n=Object.assign({...a.value},t),u=e.calendar==="persian"?F(n.hour)+":"+F(n.minute)+(e.withSeconds===!0?":"+F(n.second):""):ht(new Date(n.year,n.month===null?null:n.month-1,n.day,n.hour,n.minute,n.second,n.millisecond),l.value,h.value,n.year,n.timezoneOffset);n.changed=u!==e.modelValue,D("update:modelValue",u,n)}function Ee(){const t=[i("div",{class:"q-time__link "+(r.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:v.value,onClick:re.hour,onKeyup:Be},z.value.hour),i("div",":"),i("div",G.value===!0?{class:"q-time__link "+(r.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:v.value,onKeyup:Qe,onClick:re.minute}:{class:"q-time__link"},z.value.minute)];e.withSeconds===!0&&t.push(i("div",":"),i("div",R.value===!0?{class:"q-time__link "+(r.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:v.value,onKeyup:Ve,onClick:re.second}:{class:"q-time__link"},z.value.second));const n=[i("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},t)];return q.value===!1&&n.push(i("div",{class:"q-time__header-ampm column items-between no-wrap"},[i("div",{class:"q-time__link "+(x.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:v.value,onClick:be,onKeyup:Le},"AM"),i("div",{class:"q-time__link "+(x.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:v.value,onClick:xe,onKeyup:De},"PM")])),i("div",{class:"q-time__header flex flex-center no-wrap "+g.value},n)}function $e(){const t=a.value[r.value];return i("div",{class:"q-time__content col relative-position"},[i(Ie,{name:"q-transition--scale"},()=>i("div",{key:"clock"+r.value,class:"q-time__container-parent absolute-full"},[i("div",{ref:B,class:"q-time__container-child fit overflow-hidden"},[Ce(i("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:Pe,onMousedown:Ae},[i("div",{class:"q-time__clock-circle fit"},[i("div",{class:"q-time__clock-pointer"+(a.value[r.value]===null?" hidden":e.color!==void 0?` text-${e.color}`:""),style:ae.value}),N.value.map(n=>i("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${n.index}`+(n.val===t?" q-time__clock-position--active "+g.value:n.disable===!0?" q-time__clock-position--disable":"")},[i("span",n.label)]))])]),ue.value)])])),e.nowBtn===!0?i(Xe,{class:"q-time__now-button absolute",icon:_.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:e.color,textColor:e.textColor,tabindex:v.value,onClick:me}):null])}return y.proxy.setNow=me,()=>{const t=[$e()],n=Se(O.default);return n!==void 0&&t.push(i("div",{class:"q-time__actions"},n)),e.name!==void 0&&e.disable!==!0&&b(t,"push"),i("div",{class:le.value,tabindex:-1},[Ee(),i("div",{class:"q-time__main col overflow-auto"},t)])}}}),_t=ne({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:O,emit:D}){let y=!1,_,m,v=null,g=null,w,H;function S(){_&&_(),_=null,y=!1,v!==null&&(clearTimeout(v),v=null),g!==null&&(clearTimeout(g),g=null),m!==void 0&&m.removeEventListener("transitionend",w),w=null}function b(l,h,M){h!==void 0&&(l.style.height=`${h}px`),l.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,y=!0,_=M}function k(l,h){l.style.overflowY=null,l.style.height=null,l.style.transition=null,S(),h!==H&&D(h)}function P(l,h){let M=0;m=l,y===!0?(S(),M=l.offsetHeight===l.scrollHeight?0:void 0):(H="hide",l.style.overflowY="hidden"),b(l,M,h),v=setTimeout(()=>{v=null,l.style.height=`${l.scrollHeight}px`,w=I=>{g=null,(Object(I)!==I||I.target===l)&&k(l,"show")},l.addEventListener("transitionend",w),g=setTimeout(w,e.duration*1.1)},100)}function B(l,h){let M;m=l,y===!0?S():(H="show",l.style.overflowY="hidden",M=l.scrollHeight),b(l,M,h),v=setTimeout(()=>{v=null,l.style.height=0,w=I=>{g=null,(Object(I)!==I||I.target===l)&&k(l,"hide")},l.addEventListener("transitionend",w),g=setTimeout(w,e.duration*1.1)},100)}return Te(()=>{y===!0&&S()}),()=>i(Ie,{css:!1,appear:e.appear,onEnter:P,onLeave:B},O.default)}}),E=Ze({}),yt=Object.keys(Me),Mt=ne({name:"QExpansionItem",props:{...Me,...et,...we,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...tt,"click","afterShow","afterHide"],setup(e,{slots:O,emit:D}){const{proxy:{$q:y}}=fe(),_=qe(e,y),m=A(e.modelValue!==null?e.modelValue:e.defaultOpened),v=A(null),g=nt(),{show:w,hide:H,toggle:S}=lt({showing:m});let b,k;const P=d(()=>`q-expansion-item q-item-type q-expansion-item--${m.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),B=d(()=>e.contentInsetLevel===void 0?null:{["padding"+(y.lang.rtl===!0?"Right":"Left")]:e.contentInsetLevel*56+"px"}),l=d(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),h=d(()=>{const o={};return yt.forEach(C=>{o[C]=e[C]}),o}),M=d(()=>l.value===!0||e.expandIconToggle!==!0),I=d(()=>e.expandedIcon!==void 0&&m.value===!0?e.expandedIcon:e.expandIcon||y.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),r=d(()=>e.disable!==!0&&(l.value===!0||e.expandIconToggle===!0)),a=d(()=>({expanded:m.value===!0,detailsId:e.targetUid,toggle:S,show:w,hide:H})),x=d(()=>{const o=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:y.lang.label[m.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":m.value===!0?"true":"false","aria-controls":g.value,"aria-label":o}});Y(()=>e.group,o=>{k!==void 0&&k(),o!==void 0&&R()});function le(o){l.value!==!0&&S(o),D("click",o)}function z(o){o.keyCode===13&&q(o,!0)}function q(o,C){C!==!0&&v.value!==null&&v.value.focus(),S(o),ot(o)}function ae(){D("afterShow")}function G(){D("afterHide")}function R(){b===void 0&&(b=at()),m.value===!0&&(E[e.group]=b);const o=Y(m,N=>{N===!0?E[e.group]=b:E[e.group]===b&&delete E[e.group]}),C=Y(()=>E[e.group],(N,ue)=>{ue===b&&N!==void 0&&N!==b&&H()});k=()=>{o(),C(),E[e.group]===b&&delete E[e.group],k=void 0}}function Q(){const o={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},C=[i(ye,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&m.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:I.value})];return r.value===!0&&(Object.assign(o,{tabindex:0,...x.value,onClick:q,onKeyup:z}),C.unshift(i("div",{ref:v,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),i(ve,o,()=>C)}function $(){let o;return O.header!==void 0?o=[].concat(O.header(a.value)):(o=[i(ve,()=>[i(ke,{lines:e.labelLines},()=>e.label||""),e.caption?i(ke,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&o[e.switchToggleSide===!0?"push":"unshift"](i(ve,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>i(ye,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&o[e.switchToggleSide===!0?"unshift":"push"](Q()),o}function K(){const o={ref:"item",style:e.headerStyle,class:e.headerClass,dark:_.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return M.value===!0&&(o.clickable=!0,o.onClick=le,Object.assign(o,l.value===!0?h.value:x.value)),i(gt,o,$)}function p(){return Ce(i("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:B.value,id:g.value},Se(O.default)),[[ut,m.value]])}function V(){const o=[K(),i(_t,{duration:e.duration,onShow:ae,onHide:G},p)];return e.expandSeparator===!0&&o.push(i(_e,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:_.value}),i(_e,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:_.value})),o}return e.group!==void 0&&R(),Te(()=>{k!==void 0&&k()}),()=>i("div",{class:P.value},[i("div",{class:"q-expansion-item__container relative-position"},V())])}});export{Ct as Q,Tt as a,Mt as b};
