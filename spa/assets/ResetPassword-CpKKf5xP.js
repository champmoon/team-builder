import{_ as y}from"./index-DjJ3YJO-.js";import{_ as N,a as v,b as P,c as V}from"./CardTitle.vue_vue_type_script_setup_true_lang-SSNqWeg0.js";import{_ as R}from"./CardDescription.vue_vue_type_script_setup_true_lang-NazI6rb4.js";import{u as g,t as k,F as u,_ as r,a as d,b as f,d as E,c as _}from"./Input.vue_vue_type_script_setup_true_lang-dHgq1UFP.js";import{d as F,_ as G,at as L,o as O,b as T,f as t,i as a,v as s,l as n,h as p,m as U,aE as h,e as A}from"./index-DUC40UZw.js";import{_ as B}from"./PasswordInput.vue_vue_type_script_setup_true_lang-D8r5FXSm.js";import"./useId-Dxsgti3d.js";import"./useForwardPropsEmits-UYkf6zNi.js";const C={class:"relative"},J=F({__name:"ResetPassword",setup(I){const m=L(),{confirmPassword:c,changePassword:w}=G(),{handleSubmit:$,isSubmitting:b,setFieldValue:S}=g({validationSchema:k(h.REQUEST)}),i=$(async l=>{const e=await w(l);e&&m.push({name:"LOGIN",query:{email:e.email}})});return O(async()=>{const l=new URLSearchParams(window.location.search).get("confirm_token");if(!l){m.push({name:"LOGIN"});return}const e=await c({confirmToken:l});if(!e){m.push({name:"LOGIN"});return}S("email",e.email)}),(l,e)=>(A(),T(a(N),{class:"w-full max-w-md"},{default:t(()=>[s(a(P),null,{default:t(()=>[s(a(v),{class:"text-2xl"},{default:t(()=>e[1]||(e[1]=[n("Смена пароля")])),_:1}),s(a(R),null,{default:t(()=>e[2]||(e[2]=[n("Введите новый пароль.")])),_:1})]),_:1}),s(a(V),null,{default:t(()=>[p("form",{onSubmit:e[0]||(e[0]=(...o)=>a(i)&&a(i)(...o)),class:"space-y-2"},[s(a(u),{name:"email"},{default:t(({value:o,handleChange:x})=>[s(a(r),null,{default:t(()=>[s(a(d),null,{default:t(()=>e[3]||(e[3]=[n("Почта")])),_:1}),s(a(f),null,{default:t(()=>[s(a(E),{"model-value":o,"onUpdate:modelValue":x,type:"email",inputmode:"email",autocapitalize:"off",autocomplete:"email",placeholder:"example@example.com"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),s(a(_))]),_:2},1024)]),_:1}),s(a(u),{name:"password"},{default:t(({componentField:o})=>[s(a(r),null,{default:t(()=>[s(a(d),null,{default:t(()=>e[4]||(e[4]=[n(" Пароль ")])),_:1}),p("div",C,[s(a(f),null,{default:t(()=>[s(B,U(o,{autocomplete:"new-password"}),null,16)]),_:2},1024)]),s(a(_))]),_:2},1024)]),_:1}),s(a(y),{disabled:a(b),type:"submit",class:"w-full"},{default:t(()=>e[5]||(e[5]=[n(" Сменить пароль ")])),_:1},8,["disabled"])],32)]),_:1})]),_:1}))}});export{J as default};
