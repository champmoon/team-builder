import{d as y,u as g,r as m,p as b,A as f,l as _,m as w,n as o,q as p,f as e,Q as q,t as s,v as n,x as V,y as x,_ as N}from"./index-CigzdHN_.js";import{Q as h}from"./QForm-COvoHNqS.js";import{Q as k}from"./QPage-Bk6CQXv3.js";const Q={class:"form-container column q-pa-lg"},P={class:"row full-width"},B=p("h4",{class:"text-h5 q-my-md"},"Регистрация",-1),R=y({__name:"RegisterPage",setup(T){const c={football:"Футбол",basketball:"Баскетбол",rugby:"Рэгби",tennis:"Теннис"},r=g(),d=m(null),l=m({email:"",password:"",firstName:"",middleName:"",lastName:"",sportType:"rugby",teamName:""}),i=m(!1);async function v(){i.value=!0;const u=f.register(l.value);i.value=!1,u&&r.push({path:"/login",query:{email:l.value.email}})}return b(async()=>{const u=r.currentRoute.value.query.confirm_token;if(!u){r.push({path:"/login"});return}const a=await f.emailConfirm({confirmToken:u});if(!a){r.push({path:"/login"});return}l.value={...l.value,...a}}),(u,a)=>(_(),w(k,{class:"window-height window-width row justify-center items-center"},{default:o(()=>[p("div",Q,[p("div",P,[e(h,{class:"full-width",onSubmit:v,autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false"},{default:o(()=>[e(q,{square:"",flat:"",class:"full-width"},{default:o(()=>[e(s,{class:"bg-primary text-dark q-mb-lg"},{default:o(()=>[B]),_:1}),e(s,{class:"q-py-none",style:{"margin-bottom":"28px"}},{default:o(()=>[e(n,{"model-value":l.value.email,label:"Почта",outlined:"",readonly:""},null,8,["model-value"])]),_:1}),e(s,{class:"q-py-none",style:{"margin-bottom":"28px"}},{default:o(()=>[e(n,{"model-value":l.value.teamName,label:"Название команды",outlined:"",readonly:""},null,8,["model-value"])]),_:1}),e(s,{class:"q-py-none",style:{"margin-bottom":"28px"}},{default:o(()=>[e(n,{"model-value":c[l.value.sportType],label:"Вид спорта",outlined:"",readonly:""},null,8,["model-value"])]),_:1}),e(s,{class:"q-py-none",style:{"margin-bottom":"28px"}},{default:o(()=>[e(n,{modelValue:l.value.middleName,"onUpdate:modelValue":a[0]||(a[0]=t=>l.value.middleName=t),label:"Фамилия",outlined:""},null,8,["modelValue"])]),_:1}),e(s,{class:"q-py-none",style:{"margin-bottom":"28px"}},{default:o(()=>[e(n,{modelValue:l.value.firstName,"onUpdate:modelValue":a[1]||(a[1]=t=>l.value.firstName=t),label:"Имя",outlined:""},null,8,["modelValue"])]),_:1}),e(s,{class:"q-py-none",style:{"margin-bottom":"28px"}},{default:o(()=>[e(n,{modelValue:l.value.lastName,"onUpdate:modelValue":a[2]||(a[2]=t=>l.value.lastName=t),label:"Отчество",outlined:""},null,8,["modelValue"])]),_:1}),e(s,{class:"q-pt-none q-pb-sm"},{default:o(()=>[e(n,{modelValue:l.value.password,"onUpdate:modelValue":a[3]||(a[3]=t=>l.value.password=t),rules:[t=>!!t||"Обязательное поле",t=>t.length>=5||"Пароль должен содержать не менее 5 символов",t=>t.length<=30||"Пароль должен содержать не более 30 символов"],onKeydown:a[4]||(a[4]=t=>d.value?.resetValidation()),onBlur:a[5]||(a[5]=t=>d.value?.validate()),label:"Пароль",type:"password",ref_key:"passwordInput",ref:d,"lazy-rules":"",outlined:""},null,8,["modelValue","rules"])]),_:1}),e(s,{class:"q-pt-none q-pb-lg"},{default:o(()=>[e(V,{loading:i.value,type:"submit",color:"primary","text-color":"dark",class:"full-width",size:"lg","no-caps":""},{default:o(()=>[x(" Зарегистрироваться ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})])])]),_:1}))}}),U=N(R,[["__file","RegisterPage.vue"]]);export{U as default};
