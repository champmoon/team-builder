import{u as h,Q as $}from"./QDate-BrhryQkz.js";import{Q as w}from"./QDrawer-CwAR8Vmf.js";import{Q as B}from"./QToolbarTitle-BZc8GpyE.js";import{Q as P}from"./QToolbar-DYr7dOmz.js";import{Q as T,a as x,b as u}from"./QItemLabel-DuN-C2zx.js";import{C as q,c as g,h as I,a5 as L,aD as V,A as N,d as A,r as C,o as M,Y as U,l as d,m as v,n as a,ao as W,ap as m,f as o,x as c,F as y,aq as E,Q as F,at as _,aE as Y,_ as G}from"./index-BFn0Cppg.js";import{Q as H}from"./QPage-DK4_fnuy.js";import{I as O}from"./InnerLoading-CKNWaYoG.js";import"./date-DdmoPL0X.js";import"./format-Dumr6BwO.js";import"./TouchPan-Bhvho9XY.js";import"./selection-BQXeflt9.js";const j=["top","middle","bottom"],z=q({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>j.includes(e)}},setup(e,{slots:f}){const r=g(()=>e.align!==void 0?{verticalAlign:e.align}:null),s=g(()=>{const i=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(i!==void 0?` text-${i}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>I("div",{class:s.value,style:r.value,role:"status","aria-label":e.label},L(f.default,e.label!==void 0?[e.label]:[]))}}),J=V("calendar",{state:()=>({workouts:[],isPageLoaded:!1}),actions:{async loadPage(){await this.loadCalendarData(),this.isPageLoaded=!0},async loadCalendarData(){const e=await N.getWorkouts();e&&(this.workouts=e)}}}),K=J,R={key:0,class:"text-h5"},X={key:1,class:"column full-width"},Z=A({__name:"CalendarPage",setup(e){const f={1:{color:"info",textColor:"dark"},2:{color:"warning",textColor:"dark"},3:{color:"positive",textColor:"dark"},4:{color:"secondary",textColor:"dark"},5:{color:"negative",textColor:"dark"}},r=K(),s=h(),i=C(!0);function p(t){const n=new Date(t);return`${n.getFullYear()}/${(n.getMonth()+1).toString().padStart(2,"0")}/${n.getDate().toString().padStart(2,"0")}`}function Q(t){const n=new Date(t);return`${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}`}const b=C(p(new Date().toISOString().slice(0,-1))),k=g(()=>r.workouts.map(t=>p(t.date))),S=g(()=>r.workouts.filter(t=>p(t.date)===b.value));function D(t){return t.workoutType==="Командная"?"Командная тренировка":t.workoutType==="Групповая"?`Групповая тренировка (${s.groups[t.groupId].name})`:`Индивидуальная тренировка (${`${s.team?.sportsmans[t.sportsmanId].middleName} ${s.team?.sportsmans[t.sportsmanId].firstName} ${s.team?.sportsmans[t.sportsmanId].lastName}`.trim()})`}return M(async()=>{await s.loadTeamData(),await r.loadPage()}),U(()=>{r.isPageLoaded=!1}),(t,n)=>(d(),v(H,{class:"flex items-center column overflow-hidden",padding:""},{default:a(()=>[W(r).isPageLoaded?(d(),m(y,{key:0},[o(w,{modelValue:i.value,"onUpdate:modelValue":n[1]||(n[1]=l=>i.value=l),width:322,class:"column items-center q-pa-md bg-transparent"},{default:a(()=>[o($,{modelValue:b.value,"onUpdate:modelValue":n[0]||(n[0]=l=>b.value=l),events:k.value,"text-color":"dark","event-color":"info",class:"q-mb-md bg-secondary","no-unset":"","today-btn":"",flat:""},null,8,["modelValue","events"])]),_:1},8,["modelValue"]),o(P,{class:"bg-secondary text-white q-mb-md"},{default:a(()=>[o(B,null,{default:a(()=>[c("Список тренировок")]),_:1})]),_:1}),S.value.length===0?(d(),m("div",R," Список тренировок пуст ")):(d(),m("div",X,[(d(!0),m(y,null,E(S.value,l=>(d(),v(F,{key:l.id,class:"q-mb-md full-width",flat:""},{default:a(()=>[o(T,null,{default:a(()=>[o(x,null,{default:a(()=>[o(u,null,{default:a(()=>[c(_(l.name),1)]),_:2},1024),o(u,{caption:""},{default:a(()=>[c(_(D(l)),1)]),_:2},1024)]),_:2},1024),o(x,{side:""},{default:a(()=>[o(u,null,{default:a(()=>[o(z,Y(f[l.status.status],{label:l.status.description}),null,16,["label"])]),_:2},1024),o(u,{caption:""},{default:a(()=>[c(_(Q(l.date)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]))],64)):(d(),v(O,{key:1}))]),_:1}))}}),ce=G(Z,[["__file","CalendarPage.vue"]]);export{ce as default};
