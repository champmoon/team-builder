import{P as X,_ as Q}from"./Page.vue_vue_type_script_setup_true_lang-C-sm7-gp.js";import{_ as z}from"./Modal.vue_vue_type_script_setup_true_lang-CqBuINeJ.js";import{_ as $}from"./index-DjJ3YJO-.js";import{u as H,t as L,F as h,_ as R,a as F,b as I,d as O,c as q}from"./Input.vue_vue_type_script_setup_true_lang-dHgq1UFP.js";import{_ as G}from"./Switch.vue_vue_type_script_setup_true_lang-DKnG_MGG.js";import{u as D,P as J}from"./store-DbS3SXae.js";import{d as y,r as b,B as d,v as s,h as g,i as e,f as a,l as x,m as K,e as i,R as W,b as f,C as Y,j as Z,_ as ee,z as se,o as te,$ as ae,F as S,D as k}from"./index-DUC40UZw.js";import{_ as T}from"./Skeleton.vue_vue_type_script_setup_true_lang-DWGCC-Hw.js";import"./useForwardPropsEmits-UYkf6zNi.js";import"./useId-Dxsgti3d.js";import"./useBodyScrollLock-BjjH8AD-.js";import"./getActiveElement-DY8P70Qv.js";import"./useFormControl-B7T3OvxP.js";import"./VisuallyHiddenInput-Dl_Yde0F.js";const ie={class:"grid grid-cols-2 gap-4"},N=y({__name:"Form",props:{exercise:{}},emits:["saved"],setup(u,{emit:t}){var V,B;const l=t,r=b(!1),o=D(),{createExercise:p,patchExercise:v,deleteExercise:E,getExercises:n}=o,{handleSubmit:A,isSubmitting:M}=H({validationSchema:L(J.REQUEST.omit({type:!0})),keepValuesOnUnmount:!0,initialValues:{description:((V=u.exercise)==null?void 0:V.description)||"",isBasic:((B=u.exercise)==null?void 0:B.isBasic)||!1}}),j=async()=>{var _;r.value=!0,(_=u.exercise)!=null&&_.type&&(await E({type:u.exercise.type}),await n(),r.value=!1)},w=A(async _=>{var m;if(!((m=u.exercise)!=null&&m.type)){if(!await p({..._,type:(o.EXERCISES||[]).length+1}))return;await n(),l("saved");return}await v({..._,type:u.exercise.type})&&(await n(),l("saved"))});return(_,c)=>(i(),d("form",{onSubmit:c[0]||(c[0]=(...m)=>e(w)&&e(w)(...m)),class:"space-y-2"},[s(e(h),{name:"description"},{default:a(({componentField:m})=>[s(e(R),null,{default:a(()=>[s(e(F),null,{default:a(()=>c[1]||(c[1]=[x("Название упражнения")])),_:1}),s(e(I),null,{default:a(()=>[s(e(O),K(m,{type:"text"}),null,16)]),_:2},1024),s(e(q))]),_:2},1024)]),_:1}),s(e(h),{type:"checkbox",name:"isBasic"},{default:a(({value:m,handleChange:C})=>[s(e(R),{class:"flex items-center gap-2"},{default:a(()=>[s(e(I),null,{default:a(()=>[s(e(G),{"model-value":m,"onUpdate:modelValue":C,size:"lg"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),s(e(F),{static:""},{default:a(()=>c[2]||(c[2]=[x(" С подходами и повторениями ")])),_:1})]),_:2},1024)]),_:1}),g("div",ie,[s(e($),{loading:r.value,onClick:j,type:"button",variant:"outline",class:"w-full"},{default:a(()=>c[3]||(c[3]=[x(" Удалить ")])),_:1},8,["loading"]),s(e($),{loading:e(M),type:"submit",class:"w-full"},{default:a(()=>c[4]||(c[4]=[x(" Сохранить ")])),_:1},8,["loading"])])],32))}}),U=y({__name:"AddModal",setup(u){const t=b(!1),l=W("(min-width: 640px)");return(r,o)=>(i(),f(z,{modelValue:t.value,"onUpdate:modelValue":o[1]||(o[1]=p=>t.value=p),title:"Добавьте новое упражнение",description:"Добавьте упражнение в список упражнений."},{trigger:a(()=>[e(l)?(i(),f(e($),{key:0,variant:"outline"},{default:a(()=>o[2]||(o[2]=[x(" Добавить упражнение ")])),_:1})):(i(),f(e($),{key:1,size:"icon"},{default:a(()=>[s(e(X),{class:"!size-6"})]),_:1}))]),default:a(()=>[s(N,{onSaved:o[0]||(o[0]=p=>t.value=!1)})]),_:1},8,["modelValue"]))}}),re=["title"],oe={class:"relative aspect-[10/7] overflow-hidden rounded-lg border"},le=["alt","src"],ne={key:0,class:"absolute left-2 top-2 rounded-full bg-primary px-3 py-1 text-xs text-primary-foreground"},ce={class:"truncate font-semibold"},P=y({__name:"Item",props:{exercise:{}},setup(u){return(t,l)=>(i(),d("div",{title:t.exercise.description,class:"group flex cursor-pointer select-none flex-col gap-3"},[g("div",oe,[g("img",{draggable:!1,alt:t.exercise.description,src:`/images/exercise_${t.exercise.type%4}.png`,class:"size-full object-cover transition-transform duration-500 will-change-transform group-hover:scale-110"},null,8,le),t.exercise.isBasic?(i(),d("span",ne," С подходами и повторениями ")):Y("",!0)]),g("h3",ce,Z(t.exercise.description),1)],8,re))}}),ue=y({__name:"EditModal",props:{exercise:{}},setup(u){const t=b(!1);return(l,r)=>(i(),f(z,{modelValue:t.value,"onUpdate:modelValue":r[1]||(r[1]=o=>t.value=o),title:"Редактирование упражнения",description:"Измените или удалите упражнение."},{trigger:a(()=>[s(P,{exercise:l.exercise},null,8,["exercise"])]),default:a(()=>[s(N,{exercise:l.exercise,onSaved:r[0]||(r[0]=o=>t.value=!1)},null,8,["exercise"])]),_:1},8,["modelValue"]))}}),de={key:0,class:"flex flex-1 flex-col items-center justify-center gap-4"},me={key:1,class:"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6"},Be=y({__name:"Exercises",setup(u){const{IS_TRAINER:t}=ee(),l=D(),{EXERCISES:r}=se(l);return te(async()=>{await l.getExercises()}),(o,p)=>{var v;return i(),f(Q,null,ae({default:a(()=>{var E;return[((E=e(r))==null?void 0:E.length)===0?(i(),d("div",de,[p[0]||(p[0]=g("p",null,"Список упражнений пуст",-1)),s(U)])):(i(),d("div",me,[e(r)?(i(),d(S,{key:0},[e(t)?(i(!0),d(S,{key:0},k(e(r),n=>(i(),f(ue,{exercise:n,key:n.type},null,8,["exercise"]))),128)):(i(!0),d(S,{key:1},k(e(r),n=>(i(),f(P,{exercise:n,key:n.type},null,8,["exercise"]))),128))],64)):(i(),d(S,{key:1},k(5,n=>g("div",{key:n,class:"flex flex-col gap-3"},[s(e(T),{class:"aspect-[10/7] rounded-lg"}),s(e(T),{class:"h-6 w-3/4 rounded-lg"})])),64))]))]}),_:2},[e(t)&&((v=e(r))==null?void 0:v.length)!==0?{name:"actions",fn:a(()=>[s(U)]),key:"0"}:void 0]),1024)}}});export{Be as default};
