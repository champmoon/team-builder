import{d as L,r as P,R as n,S as c,U as t,Y as W,f as e,a3 as A,ay as m,ag as B,Q as y,X as O,W as k,au as x,F as q,a4 as E,aV as ee,aw as V,a2 as F,as as H,V as r,at as j,a0 as I,av as U,az as M,aA as te,o as oe,E as ae}from"./index-Bt_Q99-j.js";import{Q as K,a as X,b,c as f}from"./QList-emynAyBX.js";import{Q as se,c as le}from"./QExpansionItem-DHwTrb8N.js";import{Q as ne}from"./QPage-DMe7nDuD.js";import{u as S,Q as Y,C as G,a as J,i as h,I as ie}from"./use-quasar-DZ0K4KHP.js";import{Q as re}from"./QForm-B9Ia7-yt.js";import{u as R,T as D}from"./useWorkoutStore-DiHvbytV.js";import"./QMenu-Dmgvyux7.js";import"./format-J7jYEZyN.js";import"./rtl-DFPa-2ov.js";const ue={class:"card-container card-container--sm bg-dark q-pa-md"},de={class:"text-h5 text-center"},ce=L({__name:"WorkoutExerciseModal",props:{exercise:{}},emits:S.emits,setup(T){const p=T,u=R(),{dialogRef:_,onDialogOK:w,onDialogHide:Q}=S(),o=P({type:p.exercise?.type??1,reps:p.exercise?.reps??0,sets:p.exercise?.sets??0,rest:p.exercise?.rest??null,time:p.exercise?.time??0});function v(s=null){return Object.values(Object.values(u.exercisesTypes)).filter(i=>!s||i.description.toLowerCase().includes(s.toLowerCase()))}const a=P(v());function C(){const s={type:o.value.type};u.exercisesTypes[o.value.type].isBasic?(s.reps=o.value.reps,s.sets=o.value.sets,s.rest=o.value.rest):s.time=o.value.time,w(s)}return(s,i)=>(n(),c(j,{onHide:k(Q),ref_key:"dialogRef",ref:_,"no-backdrop-dismiss":"","no-shake":""},{default:t(()=>[W("div",ue,[e(A,{class:"row items-center q-pb-md"},{default:t(()=>[W("div",de,m(s.exercise?"Редактирование упражнения":"Добавление упражнения"),1),e(Y),B(e(y,{icon:"close",flat:"",round:"",dense:""},null,512),[[G]])]),_:1}),e(O,{spaced:"lg"}),e(se,{modelValue:o.value.type,"onUpdate:modelValue":i[0]||(i[0]=l=>o.value.type=l),options:a.value,onFilter:i[1]||(i[1]=(l,g)=>{g(()=>{a.value=v(l)})}),label:"Тип упражнения","option-label":"description","option-value":"type","input-debounce":"0",class:"q-mb-md","hide-selected":"","fill-input":"","use-input":"","map-options":"","emit-value":"",outlined:""},null,8,["modelValue","options"]),!k(u).exercisesTypes[o.value.type].isBasic&&typeof o.value.time=="number"?(n(),c(D,{key:0,modelValue:o.value.time,"onUpdate:modelValue":i[2]||(i[2]=l=>o.value.time=l),label:"Время выполнения",class:"q-mb-md"},null,8,["modelValue"])):(n(),x(q,{key:1},[e(E,{modelValue:o.value.reps,"onUpdate:modelValue":i[3]||(i[3]=l=>o.value.reps=l),modelModifiers:{number:!0},type:"number",label:"Количество повторений",class:"q-mb-md",outlined:""},null,8,["modelValue"]),e(E,{modelValue:o.value.sets,"onUpdate:modelValue":i[4]||(i[4]=l=>o.value.sets=l),modelModifiers:{number:!0},type:"number",label:"Количество подходов",class:"q-mb-md",outlined:""},null,8,["modelValue"]),e(ee,{"model-value":o.value.rest!==null,"onUpdate:modelValue":i[5]||(i[5]=l=>o.value.rest=l?0:null),label:"Нужен перерыв между подходами",class:"q-mb-md"},null,8,["model-value"]),typeof o.value.rest=="number"?(n(),c(D,{key:0,modelValue:o.value.rest,"onUpdate:modelValue":i[6]||(i[6]=l=>o.value.rest=l),disable:o.value.rest===null,label:"Время перерыва между подходами",class:"q-mb-md"},null,8,["modelValue","disable"])):V("",!0)],64)),e(F,{class:"bg-transparent",flat:""},{default:t(()=>[e(H,{class:"row q-pa-none"},{default:t(()=>[e(y,{onClick:C,"text-color":"positive",color:"secondary",class:"col border-radius-8",padding:"md lg",style:{"line-height":"21px"},"no-caps":""},{default:t(()=>[r(" Применить ")]),_:1})]),_:1})]),_:1})])]),_:1},8,["onHide"]))}}),N=I(ce,[["__file","WorkoutExerciseModal.vue"]]),me={class:"card-container bg-dark q-pa-md"},pe={class:"text-h5 text-center"},fe=L({__name:"WorkoutModal",props:{workout:{},workoutIndex:{}},emits:S.emits,setup(T){const p=J(),u=T,_=R(),{dialogRef:w,onDialogOK:Q,onDialogHide:o}=S(),v=P(!1),a=P({name:u.workout?.name||"",estimatedTime:u.workout?.estimatedTime||0,exercises:u.workout?.exercises||[]});function C(l,g){p.dialog({component:N,componentProps:{exercise:l}}).onOk(d=>{a.value.exercises[g]=d})}function s(){p.dialog({component:N}).onOk(l=>{a.value.exercises.push(l)})}async function i(){v.value=!0;const l=u.workoutIndex?await _.updateWorkout(u.workoutIndex,a.value):await _.createWorkout(a.value);v.value=!1,l&&Q()}return(l,g)=>(n(),c(j,{onHide:k(o),ref_key:"dialogRef",ref:w,"no-backdrop-dismiss":"","no-shake":""},{default:t(()=>[W("div",me,[e(A,{class:"row items-center q-pb-md"},{default:t(()=>[W("div",pe,m(l.workout?"Редактирование тренировки":"Создание тренировки"),1),e(Y),B(e(y,{icon:"close",flat:"",round:"",dense:""},null,512),[[G]])]),_:1}),e(O,{spaced:"lg"}),e(re,{onSubmit:i},{default:t(()=>[e(E,{modelValue:a.value.name,"onUpdate:modelValue":g[0]||(g[0]=d=>a.value.name=d),label:"Название тренировки",class:"q-mb-md",autofocus:"",outlined:""},null,8,["modelValue"]),e(D,{modelValue:a.value.estimatedTime,"onUpdate:modelValue":g[1]||(g[1]=d=>a.value.estimatedTime=d),label:"Время выполнения тренировки"},null,8,["modelValue"]),e(K,{class:"q-my-md scroll",style:{"max-height":"calc(100vh - 24rem)"}},{default:t(()=>[(n(!0),x(q,null,U(a.value.exercises,(d,$)=>B((n(),c(X,{key:$,onClick:Z=>C(d,$),clickable:""},{default:t(()=>[e(b,null,{default:t(()=>[e(f,null,{default:t(()=>[r(m(k(_).exercisesTypes[d.type].description),1)]),_:2},1024),d.time?(n(),c(f,{key:0,caption:""},{default:t(()=>[r(" Время выполнения - "+m(k(h)(d.time)),1)]),_:2},1024)):d.rest?(n(),c(f,{key:1,caption:""},{default:t(()=>[r(" Перерыв между подходами - "+m(k(h)(d.rest)),1)]),_:2},1024)):V("",!0)]),_:2},1024),k(_).exercisesTypes[d.type].isBasic?(n(),c(b,{key:0,side:""},{default:t(()=>[e(f,{caption:""},{default:t(()=>[r(" Повторений: "+m(d.reps),1)]),_:2},1024),e(f,{caption:""},{default:t(()=>[r(" Подходов: "+m(d.sets),1)]),_:2},1024)]),_:2},1024)):V("",!0),e(b,{side:""},{default:t(()=>[e(y,{onClick:M(Z=>a.value.exercises.splice($,1),["stop"]),"text-color":"negative",color:"secondary",size:"sm",icon:"close",round:"",flat:""},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["onClick"])),[[te]])),128))]),_:1}),e(F,{class:"bg-transparent",flat:""},{default:t(()=>[e(H,{class:"row q-pa-none"},{default:t(()=>[e(y,{onClick:s,"text-color":"info",color:"secondary",class:"col border-radius-8",padding:"md lg",style:{"line-height":"21px"},"no-caps":""},{default:t(()=>[r(" Добавить упражнение ")]),_:1}),e(y,{loading:v.value,type:"submit","text-color":"positive",color:"secondary",class:"col border-radius-8",padding:"md lg",style:{"line-height":"21px"},"no-caps":""},{default:t(()=>[r(" Применить ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})])]),_:1},8,["onHide"]))}}),z=I(fe,[["__file","WorkoutModal.vue"]]),ke={key:0,class:"card-container column"},ve={class:"row"},ye=L({__name:"WorkoutPage",setup(T){const p=J(),u=R();function _(o){const v={name:o.name,estimatedTime:o.estimatedTime,exercises:[]};o.exercises.forEach(a=>{a.type.isBasic?v.exercises.push({type:a.type.type,reps:a.reps,sets:a.sets,rest:a.rest}):v.exercises.push({type:a.type.type,time:a.time})}),p.dialog({component:z,componentProps:{workout:v,workoutIndex:o.id}})}function w(){p.dialog({component:z})}function Q(o){p.dialog({title:"Удаление тренировки",message:"Вы уверены, что хотите удалить тренировку?",persistent:!0,ok:{color:"negative",label:"Удалить"},cancel:{color:"secondary",label:"Отменить"}}).onOk(()=>{u.deleteWorkout(o)})}return oe(u.loadPage),ae(()=>{u.isPageLoaded=!1}),(o,v)=>(n(),c(ne,{class:"column items-center",padding:""},{default:t(()=>[k(u).isPageLoaded?(n(),x("div",ke,[e(K,{class:"bg-secondary border-radius-8 overflow-hidden q-mb-lg"},{default:t(()=>[(n(!0),x(q,null,U(k(u).workoutsPool,(a,C)=>(n(),x(q,{key:a.id},[C?(n(),c(O,{key:0})):V("",!0),e(le,{label:a.name,"content-inset-level":.3},{header:t(()=>[e(b,null,{default:t(()=>[e(f,null,{default:t(()=>[r(m(a.name),1)]),_:2},1024),e(f,{caption:""},{default:t(()=>[r(" Время проведения: "+m(k(h)(a.estimatedTime)),1)]),_:2},1024)]),_:2},1024),e(b,{side:""},{default:t(()=>[W("div",ve,[e(y,{onClick:M(s=>_(a),["stop"]),color:"positive",icon:"edit",size:"sm",flat:"",round:""},null,8,["onClick"]),e(y,{onClick:M(s=>Q(a.id),["stop"]),color:"negative",icon:"close",size:"sm",round:"",flat:""},null,8,["onClick"])])]),_:2},1024)]),default:t(()=>[(n(!0),x(q,null,U(a.exercises,(s,i)=>(n(),c(X,{key:i},{default:t(()=>[e(b,null,{default:t(()=>[e(f,null,{default:t(()=>[r(m(s.type.description),1)]),_:2},1024),s.time?(n(),c(f,{key:0,caption:""},{default:t(()=>[r(" Время выполнения - "+m(k(h)(s.time)),1)]),_:2},1024)):s.rest?(n(),c(f,{key:1,caption:""},{default:t(()=>[r(" Перерыв между подходами - "+m(k(h)(s.rest)),1)]),_:2},1024)):V("",!0)]),_:2},1024),s.type.isBasic?(n(),c(b,{key:0,side:""},{default:t(()=>[e(f,{caption:""},{default:t(()=>[r(" Повторений: "+m(s.reps),1)]),_:2},1024),e(f,{caption:""},{default:t(()=>[r(" Подходов: "+m(s.sets),1)]),_:2},1024)]),_:2},1024)):V("",!0)]),_:2},1024))),128))]),_:2},1032,["label"])],64))),128))]),_:1}),e(F,{class:"bg-transparent",flat:""},{default:t(()=>[e(H,{class:"row q-pa-none"},{default:t(()=>[e(y,{onClick:w,color:"secondary","text-color":"info",class:"col border-radius-8",padding:"md lg",style:{"line-height":"21px"},"no-caps":""},{default:t(()=>[r(" Добавить тренировку ")]),_:1})]),_:1})]),_:1})])):(n(),c(ie,{key:1}))]),_:1}))}}),We=I(ye,[["__file","WorkoutPage.vue"]]);export{We as default};
