import{d as g,P as y,r as m,D as b,a5 as f,R as _,S as w,U as o,Y as p,f as e,Z as V,_ as s,a4 as n,Q as q,V as x,a2 as N}from"./index-ClVGVZQa.js";import{Q as h}from"./QForm-BVwyUcln.js";import{Q as k}from"./QPage-D-MMIN23.js";const Q={class:"form-container column q-pa-lg"},P={class:"row full-width"},R=p("h4",{class:"text-h5 q-my-md"},"Регистрация",-1),B=g({__name:"RegisterPage",setup(S){const c={football:"Футбол",basketball:"Баскетбол",rugby:"Регби",tennis:"Теннис"},r=y(),d=m(null),a=m({email:"",password:"",firstName:"",middleName:"",lastName:"",sportType:"rugby",teamName:""}),i=m(!1);async function v(){i.value=!0;const u=f.register(a.value);i.value=!1,u&&r.push({path:"/login",query:{email:a.value.email}})}return b(async()=>{const u=r.currentRoute.value.query.confirm_token;if(!u){r.push({path:"/login"});return}const t=await f.emailConfirm({confirmToken:u});if(!t){r.push({path:"/login"});return}a.value={...a.value,...t}}),(u,t)=>(_(),w(k,{class:"window-height window-width row justify-center items-center"},{default:o(()=>[p("div",Q,[p("div",P,[e(h,{class:"full-width",onSubmit:v,autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false"},{default:o(()=>[e(V,{square:"",flat:"",class:"full-width"},{default:o(()=>[e(s,{class:"bg-primary text-dark q-mb-lg"},{default:o(()=>[R]),_:1}),e(s,{class:"q-py-none",style:{"margin-bottom":"28px"}},{default:o(()=>[e(n,{"model-value":a.value.email,label:"Почта",outlined:"",readonly:""},null,8,["model-value"])]),_:1}),e(s,{class:"q-py-none",style:{"margin-bottom":"28px"}},{default:o(()=>[e(n,{"model-value":a.value.teamName,label:"Название команды",outlined:"",readonly:""},null,8,["model-value"])]),_:1}),e(s,{class:"q-py-none",style:{"margin-bottom":"28px"}},{default:o(()=>[e(n,{"model-value":c[a.value.sportType],label:"Вид спорта",outlined:"",readonly:""},null,8,["model-value"])]),_:1}),e(s,{class:"q-py-none",style:{"margin-bottom":"28px"}},{default:o(()=>[e(n,{modelValue:a.value.middleName,"onUpdate:modelValue":t[0]||(t[0]=l=>a.value.middleName=l),label:"Фамилия",outlined:""},null,8,["modelValue"])]),_:1}),e(s,{class:"q-py-none",style:{"margin-bottom":"28px"}},{default:o(()=>[e(n,{modelValue:a.value.firstName,"onUpdate:modelValue":t[1]||(t[1]=l=>a.value.firstName=l),label:"Имя",outlined:""},null,8,["modelValue"])]),_:1}),e(s,{class:"q-py-none",style:{"margin-bottom":"28px"}},{default:o(()=>[e(n,{modelValue:a.value.lastName,"onUpdate:modelValue":t[2]||(t[2]=l=>a.value.lastName=l),label:"Отчество",outlined:""},null,8,["modelValue"])]),_:1}),e(s,{class:"q-pt-none q-pb-sm"},{default:o(()=>[e(n,{modelValue:a.value.password,"onUpdate:modelValue":t[3]||(t[3]=l=>a.value.password=l),rules:[l=>!!l||"Обязательное поле",l=>l.length>=5||"Пароль должен содержать не менее 5 символов",l=>l.length<=30||"Пароль должен содержать не более 30 символов",l=>[...new Set(l)].length>=3||"Пароль должен содержать не менее 3-х уникальных символов"],onKeydown:t[4]||(t[4]=l=>d.value?.resetValidation()),onBlur:t[5]||(t[5]=l=>d.value?.validate()),label:"Пароль",type:"password",ref_key:"passwordInput",ref:d,"lazy-rules":"",outlined:""},null,8,["modelValue","rules"])]),_:1}),e(s,{class:"q-pt-none q-pb-lg"},{default:o(()=>[e(q,{loading:i.value,type:"submit",color:"primary","text-color":"dark",class:"full-width",size:"lg","no-caps":""},{default:o(()=>[x(" Зарегистрироваться ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})])])]),_:1}))}}),I=N(B,[["__file","RegisterPage.vue"]]);export{I as default};
